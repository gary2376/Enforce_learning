# 🏗 HW2: 網格地圖開發與價值函數評估 (Value Function Evaluation)

## 📌 專案目的

本專案的目標是開發一個基於 Flask 的網格地圖應用，讓使用者能夠互動式地設置起點、終點、障礙物，並利用 **價值函數評估 (Value Function Evaluation)** 方法計算每個格子的價值函數 \( V(s) \) 及對應策略。

本專案包含兩個主要部分：

1. **HW1-1: 網格地圖開發**
   - 使用者可設定網格大小 \( n \times n \)（\( 5 \leq n \leq 9 \)）。
   - 點擊設定 **起始點（綠色）**、**終點（紅色）**、**障礙物（灰色）**。
2. **HW1-2: 策略顯示與價值函數評估**
   - 針對每個格子，顯示隨機策略（上下左右）。
   - 計算價值函數 \( V(s) \) 來評估各格子的重要性。

---

## 🚀 專案執行流程

1. **伺服器啟動**
   - 啟動 Flask 伺服器，載入 `index.html` 作為前端界面。
2. **使用者互動**
   - 使用者可選擇網格大小 \( n \) 並點擊 **「Generate Grid」** 生成網格。
   - 透過滑鼠點擊設定 **起點**（S）、**終點**（E）、**障礙物**。
   - 點擊 **「Solve」** 來計算策略與價值函數。
3. **伺服器計算**
   - 生成隨機策略。
   - 進行 **價值函數評估 (Value Function Evaluation)** 來計算 \( V(s) \)。
   - 回傳策略箭頭與價值函數結果。
4. **網頁顯示結果**
   - 每個格子內部顯示 **策略方向**（箭頭）及 **數值 \( V(s) \)**。

---

## 🏗 背景與理論基礎

### 🎯 **強化學習與價值函數**

本專案採用 **價值函數 (Value Function)** 的概念來評估每個狀態的價值。價值函數 \( V(s) \) 表示從某個狀態 \( s \) 開始，依照當前策略執行動作時，期望獲得的累積報酬。

價值函數的更新方式如下：
\(
V(s) = R(s) + \gamma \sum P(s'|s, a) V(s')
\)
其中：

- \( R(s) \) 為當前狀態的即時回報 (reward)。
- \( \gamma \) 是折扣因子 (discount factor)。
- \( P(s'|s, a) \) 是從狀態 \( s \) 採取動作 \( a \) 轉移到新狀態 \( s' \) 的機率。
- \( V(s') \) 是新狀態的價值。

### 🤖 **動態規劃與策略評估**

我們使用 **動態規劃 (Dynamic Programming)** 方法來評估策略的好壞，透過 **價值函數評估 (Value Function Evaluation)** 來收斂至最優值。

---

## 📝 程式碼結構

本專案主要由 Flask 伺服器 (`app.py`) 及前端 (`index.html`) 組成。

### 🔹 Flask 伺服器 (`app.py`)

負責計算策略與價值函數，提供 API。

### 🔹 價值函數評估 (`policy_evaluation`)

透過動態規劃方法計算每個狀態的價值。

---

## 📊 結果示範

| 格子           | 內容          |
| -------------- | ------------- |
| 🟩             | 起點（S）     |
| 🟥             | 終點（E）     |
| ⬜             | 可行走區域    |
| 🟨             | 走過的區域    |
| ▒             | 障礙物        |
| →, ←, ↑, ↓ | 策略方向      |
| -5.2           | \( V(s) \) 值 |

---

## 🏆 結論

本專案透過 **Flask + JavaScript** 搭建了一個網格環境，並利用 **價值函數評估 (Value Function Evaluation)** 方法計算價值函數 \( V(s) \)。

🔥 **下一步優化**：

- **動態策略改進**（策略迭代）。
- **加入隨機動作機率**（馬可夫決策過程 MDP）。
- **改進 UI 顯示，增加動畫效果**。
- **加入 Q-Learning 或 SARSA** 以探索更進階的學習方法。

---

## 🚀 未來改進計劃

✅ **1. 增加策略迭代與增強學習技術**  
✅ **2. 支援 Dijkstra 演算法，讓使用者可以選擇不同求解方法**  
✅ **3. 增加 GUI 介面，提高易用性**  
✅ **4. 支援更大規模的環境，例如迷宮、複雜地圖**  

---

## 🎯 結論

本專案透過 **Flask + JavaScript**，讓使用者能夠 **直觀地學習強化學習與最佳路徑演算法**。

🚀 **適用於機器人導航、遊戲 AI、自動駕駛、物流路徑規劃等應用！** 🎯

